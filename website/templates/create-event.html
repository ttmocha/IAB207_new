<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Create / Update Tournament - FN Tourney Hub</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='style/style.css') }}">
</head>
<body>

  {% include "navbar.html" %}

  <!-- Flash messages (global) -->
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      <div class="container mt-4">
        {% for category, message in messages %}
          <div class="alert alert-{{ 'success' if category == 'success' else 'danger' if category == 'error' else 'info' }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
        {% endfor %}
      </div>
    {% endif %}
  {% endwith %}

  <div class="container" style="padding-top: 7rem; padding-bottom: 3rem;">
    <h1 class="mb-4 fw-bold d-flex align-items-center gap-2" style="color:#ff4d4d;">
      <i class="bi bi-joystick"></i> Create / Update FORTNITE Tournament
    </h1>

    <!-- Making status not selectable as referenced by tutors :) -->
    <form class="row g-3 bg-dark text-light p-4 rounded shadow" method="POST" enctype="multipart/form-data" novalidate>
      {{ form.hidden_tag() }}

      <div class="col-md-6">
        {{ form.title.label(class="form-label") }}
        {{ form.title(class="form-control", placeholder="e.g., FN OCE Open", required=True, maxlength=140) }}
      </div>

      <div class="col-md-6">
        {{ form.category.label(class="form-label") }}
        {{ form.category(class="form-select", required=True) }}
      </div>

      <div class="col-md-6">
        {{ form.region.label(class="form-label") }}
        {{ form.region(class="form-select", required=True) }}
      </div>

      <div class="col-md-3">
        {{ form.date.label(class="form-label") }}
        {{ form.date(class="form-control", required=True) }}
        <div class="form-text">Date must be in the future (validated server-side).</div>
      </div>

      <div class="col-md-3">
        {{ form.time.label(class="form-label") }}
        {{ form.time(class="form-control", required=True) }}
      </div>

      <div class="col-md-6">
        {{ form.team_size.label(class="form-label") }}
        {{ form.team_size(class="form-select", required=True) }}
      </div>

      <div class="col-md-6">
        {{ form.mode.label(class="form-label") }}
        {{ form.mode(class="form-select", required=True) }}
      </div>

      <div class="col-md-9">
        {{ form.banner_url.label(class="form-label") }}
        {{ form.banner_url(class="form-control", placeholder="https://example.com/banner.jpg") }}
        <div class="form-text">Provide a public image URL or upload a file.</div>
      </div>

      <div class="col-md-3">
        {{ form.banner_upload.label(class="form-label") }}
        {{ form.banner_upload(class="form-control") }}
      </div>

      <div class="col-12">
        {{ form.description.label(class="form-label") }}
        {{ form.description(class="form-control", rows="4", placeholder="Format, rules, prize details, broadcast links...") }}
      </div>

      <div class="col-md-6">
        {{ form.prize.label(class="form-label") }}
        {{ form.prize(class="form-control", placeholder="$500") }}
        <div class="form-text">Example: $500. Ensure non-negative values (validated server-side).</div>
      </div>

      <div class="col-12 text-center mt-3">
        {{ form.submit(class="btn btn-danger px-4 me-2") }}
        <a href="{{ url_for('main.index') }}" class="btn btn-outline-light">Cancel</a>
      </div>
    </form>
  </div>

  {% include "footer.html" %}
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
